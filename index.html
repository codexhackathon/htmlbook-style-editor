<html>
<head>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/semantic-ui/dist/semantic.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.9/ace.js" type="text/javascript" charset="utf-8"></script>

  <script src="main.js"></script>

  <link href="bower_components/semantic-ui/dist/semantic.css" rel="stylesheet" type="text/css">
  <link href="main.css" rel="stylesheet" type="text/css">
  <style>
    body style {
      display: block;
      background: #333;
      color: #dee;
      font: 13px/1.8 Monaco, Mono-Space;
      padding: 20px;
      white-space: pre;
    }
  </style>
</head>
<body class="site">
<!--<div class="ui menu">
  <a class="active item">
    <i class="home icon"></i> Home
  </a>
  <div class="right menu">
    <div class="item">
      <div class="ui transparent icon input">
        <input type="text" placeholder="Search...">
        <i class="search link icon"></i>
      </div>
    </div>
  </div>
</div>-->

<div class="ui stackable grid">

<div class="center aligned sixteen wide column">
<h1 class="ui icon header">
  <i class="edit icon"></i>
  <div class="content">
    HTMLBook Style Editor
    <div class="sub header">Style HTMLBook, Save Your Styles.</div>
  </div>
</h1>
</div>

<div class="right aligned sixteen wide column">
<select class="ui selection dropdown">
  <option value="">Choose a Book...</option>
  <option value="1">Frankenstein</option>
  <option value="0">Pride and Prejudice</option>
</select>
</div>

<div class="eight wide column">
  <style contenteditable id="editor">
  </style>
</div>

<div class="eight wide column">
<iframe id="html-book-content">
</iframe>
</div>
</div>

<script>
    $(document).ready(function() {
      $('style').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });

    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/css");

    editor.commands.addCommand({
      name: 'myCommand',
      bindKey: {win: 'Ctrl-s',  Mac: 'Command-s'},
      exec: function(editor) {
        var style = editor.getValue();
        $('iframe').contents().find('head').html('<style>' + style + '</style>');
      },
      readOnly: true // false if this command should not apply in readOnly mode
    });
</script>
</body>
</html>
